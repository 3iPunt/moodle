{"version":3,"file":"tooltip.min.js","sources":["../src/tooltip.js"],"sourcesContent":["define(['jquery'], function($) {\n\n    /**\n     * Tooltip class.\n     *\n     * @param {String} selector The css selector for the node(s) to enhance with tooltips.\n     */\n    var Tooltip = function(selector) {\n        // Tooltip code matches: http://www.w3.org/WAI/PF/aria-practices/#tooltip\n        this._regionSelector = selector;\n\n        // For each node matching the selector - find an aria-describedby attribute pointing to an role=\"tooltip\" element.\n\n        $(this._regionSelector).each(function(index, element) {\n            var tooltipId = $(element).attr('aria-describedby');\n            if (tooltipId) {\n                var tooltipele = document.getElementById(tooltipId);\n                if (tooltipele) {\n                    var correctRole = $(tooltipele).attr('role') == 'tooltip';\n\n                    if (correctRole) {\n                        $(tooltipele).hide();\n                        // Ensure the trigger for the tooltip is keyboard focusable.\n                        $(element).attr('tabindex', '0');\n                    }\n\n                    // Attach listeners.\n                    $(element).on('focus', this._handleFocus.bind(this));\n                    $(element).on('mouseover', this._handleMouseOver.bind(this));\n                    $(element).on('mouseout', this._handleMouseOut.bind(this));\n                    $(element).on('blur', this._handleBlur.bind(this));\n                    $(element).on('keydown', this._handleKeyDown.bind(this));\n                }\n            }\n        }.bind(this));\n    };\n\n    /** @type {String} Selector for the page region containing the user navigation. */\n    Tooltip.prototype._regionSelector = null;\n\n    /**\n     * Find the tooltip referred to by this element and show it.\n     *\n     * @param {Event} e\n     */\n    Tooltip.prototype._showTooltip = function(e) {\n        var triggerElement = $(e.target);\n        var tooltipId = triggerElement.attr('aria-describedby');\n        if (tooltipId) {\n            var tooltipele = $(document.getElementById(tooltipId));\n\n            tooltipele.show();\n            tooltipele.attr('aria-hidden', 'false');\n\n            if (!tooltipele.is('.tooltip')) {\n                // Change the markup to a bootstrap tooltip.\n                var inner = $('<div class=\"tooltip-inner\"></div>');\n                inner.append(tooltipele.contents());\n                tooltipele.append(inner);\n                tooltipele.addClass('tooltip');\n                tooltipele.addClass('bottom');\n                tooltipele.append('<div class=\"tooltip-arrow\"></div>');\n            }\n            var pos = triggerElement.offset();\n            pos.top += triggerElement.height() + 10;\n            $(tooltipele).offset(pos);\n        }\n    };\n\n    /**\n     * Find the tooltip referred to by this element and hide it.\n     *\n     * @param {Event} e\n     */\n    Tooltip.prototype._hideTooltip = function(e) {\n        var triggerElement = $(e.target);\n        var tooltipId = triggerElement.attr('aria-describedby');\n        if (tooltipId) {\n            var tooltipele = document.getElementById(tooltipId);\n\n            $(tooltipele).hide();\n            $(tooltipele).attr('aria-hidden', 'true');\n        }\n    };\n\n    /**\n     * Listener for focus events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleFocus = function(e) {\n        this._showTooltip(e);\n    };\n\n    /**\n     * Listener for keydown events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleKeyDown = function(e) {\n        if (e.which == 27) {\n            this._hideTooltip(e);\n        }\n    };\n\n    /**\n     * Listener for mouseover events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleMouseOver = function(e) {\n        this._showTooltip(e);\n    };\n\n    /**\n     * Listener for mouseout events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleMouseOut = function(e) {\n        var triggerElement = $(e.target);\n\n        if (!triggerElement.is(\":focus\")) {\n            this._hideTooltip(e);\n        }\n    };\n\n    /**\n     * Listener for blur events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleBlur = function(e) {\n        this._hideTooltip(e);\n    };\n\n    return Tooltip;\n});\n"],"names":["define","$","Tooltip","selector","_regionSelector","this","each","index","element","tooltipId","attr","tooltipele","document","getElementById","hide","on","_handleFocus","bind","_handleMouseOver","_handleMouseOut","_handleBlur","_handleKeyDown","prototype","_showTooltip","e","triggerElement","target","show","is","inner","append","contents","addClass","pos","offset","top","height","_hideTooltip","which"],"mappings":"AAAAA,sBAAO,CAAC,WAAW,SAASC,GAOxB,IAAIC,QAAU,SAASC,UAEdC,KAAAA,gBAAkBD,SAIvBF,EAAEI,KAAKD,iBAAiBE,KAAK,SAASC,MAAOC,SACrCC,IAAAA,UAAYR,EAAEO,SAASE,KAAK,oBAChC,GAAID,UAAW,CACX,IAAIE,WAAaC,SAASC,eAAeJ,WACzC,GAAIE,WACgD,WAA9BV,EAAEU,YAAYD,KAAK,UAGjCT,EAAEU,YAAYG,OAEdb,EAAEO,SAASE,KAAK,WAAY,MAIhCT,EAAEO,SAASO,GAAG,QAASV,KAAKW,aAAaC,KAAKZ,OAC9CJ,EAAEO,SAASO,GAAG,YAAaV,KAAKa,iBAAiBD,KAAKZ,OACtDJ,EAAEO,SAASO,GAAG,WAAYV,KAAKc,gBAAgBF,KAAKZ,OACpDJ,EAAEO,SAASO,GAAG,OAAQV,KAAKe,YAAYH,KAAKZ,OAC5CJ,EAAEO,SAASO,GAAG,UAAWV,KAAKgB,eAAeJ,KAAKZ,MAEzD,CACJ,EAACY,KAAKZ,MACV,EAgGD,OA7FAH,QAAQoB,UAAUlB,gBAAkB,KAOpCF,QAAQoB,UAAUC,aAAe,SAASC,GACtC,IAAIC,eAAiBxB,EAAEuB,EAAEE,QACrBjB,UAAYgB,eAAef,KAAK,oBACpC,GAAID,UAAW,CACPE,IAAAA,WAAaV,EAAEW,SAASC,eAAeJ,YAK3C,GAHAE,WAAWgB,OACXhB,WAAWD,KAAK,cAAe,UAE1BC,WAAWiB,GAAG,YAAa,CAE5B,IAAIC,MAAQ5B,EAAE,qCACd4B,MAAMC,OAAOnB,WAAWoB,YACxBpB,WAAWmB,OAAOD,OAClBlB,WAAWqB,SAAS,WACpBrB,WAAWqB,SAAS,UACpBrB,WAAWmB,OAAO,oCACrB,CACD,IAAIG,IAAMR,eAAeS,SACzBD,IAAIE,KAAOV,eAAeW,SAAW,GACrCnC,EAAEU,YAAYuB,OAAOD,IACxB,CACJ,EAOD/B,QAAQoB,UAAUe,aAAe,SAASb,GACtC,IACIf,UADiBR,EAAEuB,EAAEE,QACMhB,KAAK,oBACpC,GAAID,UAAW,CACX,IAAIE,WAAaC,SAASC,eAAeJ,WAEzCR,EAAEU,YAAYG,OACdb,EAAEU,YAAYD,KAAK,cAAe,OACrC,CACJ,EAMDR,QAAQoB,UAAUN,aAAe,SAASQ,GACjCD,KAAAA,aAAaC,EACrB,EAMDtB,QAAQoB,UAAUD,eAAiB,SAASG,GACzB,IAAXA,EAAEc,OACGD,KAAAA,aAAab,EAEzB,EAMDtB,QAAQoB,UAAUJ,iBAAmB,SAASM,GACrCD,KAAAA,aAAaC,EACrB,EAMDtB,QAAQoB,UAAUH,gBAAkB,SAASK,GACpBvB,EAAEuB,EAAEE,QAELE,GAAG,WACdS,KAAAA,aAAab,EAEzB,EAMDtB,QAAQoB,UAAUF,YAAc,SAASI,GAChCa,KAAAA,aAAab,EACrB,EAEMtB,OACV"}